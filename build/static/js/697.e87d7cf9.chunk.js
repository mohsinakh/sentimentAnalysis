"use strict";(self.webpackChunksentiment_analysis=self.webpackChunksentiment_analysis||[]).push([[697],{2697:(e,s,a)=>{a.r(s),a.d(s,{default:()=>p});var o=a(9379),r=a(2483),n=a(3376),i=a(8902),t=a(5888),l=a(9747),c=a(1750),d=a(6871),g=a(7321),m=a(1817),u=a(6723);const p=()=>{const[e,s]=(0,r.useState)({username:"",email:"",password:"",confirmPassword:""}),[a,p]=(0,r.useState)(""),[h,j]=(0,r.useState)(!1),[x,f]=(0,r.useState)(!1),[w,y]=(0,r.useState)(!1),[S,b]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),[P,k]=(0,r.useState)(""),C=(0,n.Zp)(),{showToast:G}=(0,c.d)(),{login:A,host:O}=(0,r.useContext)(g.c),T=(0,n.zy)(),{codeResponse:_}=T.state||{},q=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/,z=/^[a-zA-Z0-9._%+-]+@gmail\.com$/,E=a=>{const{name:r,value:n}=a.target;s((0,o.A)((0,o.A)({},e),{},{[r]:n})),"password"===r&&(q.test(n)?b(""):b("Password must be at least 8 characters, including a number and a special character."),n!==e.confirmPassword?N("Passwords do not match."):N("")),"confirmPassword"===r&&(n!==e.password?N("Passwords do not match."):N("")),"email"===r&&(z.test(n)?k(""):k("Please enter a valid Gmail address."))},F=async e=>{try{const s={token:e.access_token},a=await fetch("".concat(O,"/google-signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await a.json();if(500===a.status)return G("Google User already exist. Redirecting to Login page...","warning"),void C("/login");a.ok?(A(o.access_token),localStorage.setItem("user",o.user_info),G(o.message,"success"),C("/profile")):G(o.detail||"Google signup failed","error")}catch(a){console.error("Google signup failed:",a),G("Failed to sign up with Google","error")}},J=(0,d.mg)({onSuccess:F,onError:e=>{console.error("Google Login Failed:",e),G("Google login failed. Please try again.","error")}});return(0,r.useEffect)((()=>{_&&F(_)}),[_]),(0,u.jsxs)("div",{className:"signup-container",children:[(0,u.jsx)("h2",{children:"Sign Up"}),h?(0,u.jsx)(i.A,{}):(0,u.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),e.username&&e.email&&e.password&&e.confirmPassword)if(S||v||P)p("Please fix the errors above.");else{j(!0);try{const s=await fetch("".concat(O,"/check-user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,email:e.email})}),a=await s.json();if(a.error)return p(a.error),void j(!1);const o=await fetch("".concat(O,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(o.ok){const s={username:e.username,email:e.email,password:e.password};localStorage.setItem("user",JSON.stringify(s)),G("Sign up successful! Please log in.","success"),C("/login")}else{const e=await o.json();p(e.detail||"Registration failed"),G(e.detail||"Registration failed","error")}}catch(a){console.error("Error:",a),p("Failed to register, please try again."),G("Failed to register, please try again.","error")}finally{j(!1)}}else p("All fields are required.")},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Username:"}),(0,u.jsx)("input",{type:"text",name:"username",value:e.username,onChange:E,required:!0})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Email:"}),(0,u.jsx)("input",{type:"email",name:"email",value:e.email,onChange:E,required:!0}),P&&(0,u.jsx)("p",{className:"error-message",children:P})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Password:"}),(0,u.jsxs)("div",{className:"password-container",children:[(0,u.jsx)("input",{type:x?"text":"password",name:"password",value:e.password,onChange:E,required:!0}),(0,u.jsxs)("span",{className:"password-toggle-icon",onClick:()=>f(!x),children:[x?(0,u.jsx)(t.g,{icon:l.k6j}):(0,u.jsx)(t.g,{icon:l.pS3})," "]})]}),S&&(0,u.jsx)("p",{className:"error-message",children:S})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{children:"Confirm Password:"}),(0,u.jsxs)("div",{className:"password-container",children:[(0,u.jsx)("input",{type:w?"text":"password",name:"confirmPassword",value:e.confirmPassword,onChange:E,required:!0}),(0,u.jsxs)("span",{className:"password-toggle-icon",onClick:()=>y(!w),children:[w?(0,u.jsx)(t.g,{icon:l.k6j}):(0,u.jsx)(t.g,{icon:l.pS3})," "]})]}),v&&(0,u.jsx)("p",{className:"error-message",children:v})]}),a&&(0,u.jsx)("p",{className:"error-message",children:a}),(0,u.jsx)("button",{className:"signup-button",type:"submit",children:"Sign Up"})]}),(0,u.jsx)("div",{className:"google-btn-container",children:(0,u.jsxs)("button",{className:"button-google",onClick:J,children:[(0,u.jsx)("img",{src:m,alt:"Google Icon",className:"google-icon"}),"Login with Google"]})}),(0,u.jsxs)("p",{children:["Already have an account?"," ",(0,u.jsx)("span",{className:"login-button",onClick:()=>C("/login"),children:"Login"})]})]})}},1817:(e,s,a)=>{e.exports=a.p+"static/media/google.81fdb134397492b14f45.png"}}]);
//# sourceMappingURL=697.e87d7cf9.chunk.js.map