"use strict";(self.webpackChunksentiment_analysis=self.webpackChunksentiment_analysis||[]).push([[868],{9868:(s,e,t)=>{t.r(e),t.d(e,{default:()=>m});var a=t(2483),i=t(3376),n=t(7321),l=t(9747),r=t(5888),o=t(2362),c=t(1750),d=t(8902),h=t(6723);const m=()=>{const{token:s,host:e}=(0,a.useContext)(n.c),[t,m]=(0,a.useState)(null),[y,x]=(0,a.useState)([]),[j,u]=(0,a.useState)(!0),p=(0,i.Zp)(),{showToast:g}=(0,c.d)(),f=(0,a.useCallback)((async t=>{if(s)try{const t=await fetch("".concat(e,"/analysis-history"),{method:"GET",headers:{Authorization:"Bearer ".concat(s)}});if(!t.ok)return void u(!1);const a=await t.json();x(a.history||[]),u(!1),g("Analysis history loaded successfully!","success")}catch(a){console.error("Error fetching analysis history:",a),u(!1),g("An error occurred while loading the history.","error")}}),[s]);(0,a.useEffect)((()=>{const s=JSON.parse(localStorage.getItem("user"))||null;s&&(m(s),f(s.username))}),[f]);const _=y.filter((s=>"sentiment"===s.analysis_type)),b=y.filter((s=>"youtube"===s.analysis_type)),N=y.filter((s=>"reddit"===s.analysis_type));return(0,h.jsxs)("div",{className:"profile-page",children:[(0,h.jsx)("h2",{className:"profile-header",children:"Profile Page"}),t?(0,h.jsxs)("div",{className:"profile-details",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)(r.g,{icon:l.X46}),(0,h.jsx)("strong",{children:" Username:"})," ",t.username]}),(0,h.jsxs)("p",{children:[(0,h.jsx)(r.g,{icon:l.y_8}),(0,h.jsx)("strong",{children:" Email:"})," ",t.email]}),(0,h.jsxs)("div",{className:"history-section",children:[(0,h.jsx)("h3",{children:"Analysis History"}),j?(0,h.jsx)(d.A,{}):(0,h.jsxs)("div",{className:"history-category-container",children:[_.length>0&&(0,h.jsxs)("div",{className:"history-category sentiment",children:[(0,h.jsxs)("h4",{children:[(0,h.jsx)(r.g,{icon:l.Qpm})," Sentiment Analysis"]}),(0,h.jsx)("div",{className:"analysis-content",children:_.map(((s,e)=>(0,h.jsxs)("div",{className:"history-item",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Date:"})," ",new Date(s.timestamp).toLocaleString()]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Text:"})," ",s.analysis_data.text]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Sentiment:"})," ",s.analysis_data.sentiment]}),(0,h.jsx)("button",{onClick:()=>(s=>{g("Re-analyzing sentiment...","info"),p("/realtime-sentiment-analysis",{state:{analysisData:s.analysis_data.text}})})(s),className:"profile-btn",children:"Re-analyze Sentiment"})]},e)))})]}),b.length>0&&(0,h.jsxs)("div",{className:"history-category youtube",children:[(0,h.jsxs)("h4",{children:[(0,h.jsx)(r.g,{icon:o.B4m})," YouTube Analysis"]}),(0,h.jsx)("div",{className:"analysis-content",children:b.map(((s,e)=>(0,h.jsxs)("div",{className:"history-item",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Date:"})," ",new Date(s.timestamp).toLocaleString()]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Video URL:"})," ",(0,h.jsx)("a",{href:"https://www.youtube.com/embed/".concat(s.analysis_data.video_id),target:"_blank",rel:"noreferrer",className:"profile_link",children:"View Video"})]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Video Title:"})," ",s.analysis_data.title]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Comments:"})," ",s.analysis_data.comments.length," comments"]}),(0,h.jsx)("div",{className:"youtube-video",children:(0,h.jsx)("iframe",{width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(s.analysis_data.video_id),frameBorder:"0",allowFullScreen:!0,title:s.analysis_data.title})}),(0,h.jsx)("button",{onClick:()=>(s=>{g("Re-analyzing YouTube video...","info"),p("/youtube-analysis",{state:{videoUrl:"https://youtu.be/".concat(s.analysis_data.video_id)}})})(s),className:"profile-btn",children:"Re-analyze YouTube"})]},e)))})]}),N.length>0&&(0,h.jsxs)("div",{className:"history-category reddit",children:[(0,h.jsxs)("h4",{children:[(0,h.jsx)(r.g,{icon:o.onr})," Reddit Analysis"]}),(0,h.jsx)("div",{className:"analysis-content",children:N.map(((s,e)=>(0,h.jsxs)("div",{className:"history-item",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Date:"})," ",new Date(s.timestamp).toLocaleString()]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Post URL:"})," ",(0,h.jsx)("a",{href:s.analysis_data.post.url,target:"_blank",rel:"noreferrer",className:"profile_link",children:"View Post"})]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Subreddit:"})," ",s.analysis_data.subreddit||"No Subreddit Data"]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Comments:"})," ",s.analysis_data.comments.length," comments"]}),(0,h.jsx)("div",{className:"reddit-post",children:s.analysis_data.post.url&&s.analysis_data.post.url.match(/\.(jpeg|jpg|gif|png)$/)?(0,h.jsx)("img",{src:s.analysis_data.post.url,alt:"Reddit post",className:"reddit-image"}):null}),(0,h.jsx)("button",{onClick:()=>(s=>{g("Re-analyzing Reddit post...","info"),p("/reddit-analysis",{state:{postId:"https://reddit/comments/".concat(s.analysis_data.post_id)}})})(s),className:"profile-btn",children:"Re-analyze Reddit"})]},e)))})]})]}),0===y.length&&!j&&(0,h.jsx)("p",{className:"no-history",children:"No analysis history found."})]})]}):(0,h.jsx)("p",{children:(0,h.jsx)(d.A,{})})]})}}}]);
//# sourceMappingURL=868.f490b25c.chunk.js.map