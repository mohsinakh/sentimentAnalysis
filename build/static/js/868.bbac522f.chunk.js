"use strict";(self.webpackChunksentiment_analysis=self.webpackChunksentiment_analysis||[]).push([[868],{868:(s,e,t)=>{t.r(e),t.d(e,{default:()=>h});var a=t(483),i=t(376),n=t(321),l=t(747),r=t(888),c=t(362),o=t(902),d=t(723);const h=()=>{const{token:s}=(0,a.useContext)(n.c),[e,t]=(0,a.useState)(null),[h,m]=(0,a.useState)([]),[y,x]=(0,a.useState)(!0),j=(0,i.Zp)(),p=(0,a.useCallback)((async e=>{try{const e=await fetch("https://sentiment-analysis-api-eight.vercel.app/analysis-history",{method:"GET",headers:{Authorization:"Bearer ".concat(s)}});if(!e.ok)return void x(!1);const t=await e.json();m(t.history||[]),x(!1)}catch(t){console.error("Error fetching analysis history:",t),x(!1)}}),[s]);(0,a.useEffect)((()=>{if(s){const s=JSON.parse(localStorage.getItem("user"))||null;s?(t(s),p(s.username)):j("/login")}else j("/login")}),[s,j,p]);const u=h.filter((s=>"sentiment"===s.analysis_type)),g=h.filter((s=>"youtube"===s.analysis_type)),_=h.filter((s=>"reddit"===s.analysis_type));return(0,d.jsxs)("div",{className:"profile-page",children:[(0,d.jsx)("h2",{className:"profile-header",children:"Profile Page"}),e?(0,d.jsxs)("div",{className:"profile-details",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)(r.g,{icon:l.X46}),(0,d.jsx)("strong",{children:" Username:"})," ",e.username]}),(0,d.jsxs)("p",{children:[(0,d.jsx)(r.g,{icon:l.y_8}),(0,d.jsx)("strong",{children:" Email:"})," ",e.email]}),(0,d.jsxs)("div",{className:"history-section",children:[(0,d.jsx)("h3",{children:"Analysis History"}),y?(0,d.jsx)(o.A,{}):(0,d.jsxs)("div",{className:"history-category-container",children:[u.length>0&&(0,d.jsxs)("div",{className:"history-category sentiment",children:[(0,d.jsxs)("h4",{children:[(0,d.jsx)(r.g,{icon:l.Qpm})," Sentiment Analysis"]}),(0,d.jsx)("div",{className:"analysis-content",children:u.map(((s,e)=>(0,d.jsxs)("div",{className:"history-item",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Date:"})," ",new Date(s.timestamp).toLocaleString()]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Text:"})," ",s.analysis_data.text]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Sentiment:"})," ",s.analysis_data.sentiment]}),(0,d.jsx)("button",{onClick:()=>(s=>{j("/RealTimeSentimentAnalysis",{state:{analysisData:s.analysis_data.text}})})(s),className:"profile-btn",children:"Re-analyze Sentiment"})]},e)))})]}),g.length>0&&(0,d.jsxs)("div",{className:"history-category youtube",children:[(0,d.jsxs)("h4",{children:[(0,d.jsx)(r.g,{icon:c.B4m})," YouTube Analysis"]}),(0,d.jsx)("div",{className:"analysis-content",children:g.map(((s,e)=>(0,d.jsxs)("div",{className:"history-item",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Date:"})," ",new Date(s.timestamp).toLocaleString()]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Video URL:"})," ",(0,d.jsx)("a",{href:"https://www.youtube.com/embed/".concat(s.analysis_data.video_id),target:"_blank",rel:"noreferrer",className:"profile_link",children:"View Video"})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Video Title:"})," ",s.analysis_data.title]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Comments:"})," ",s.analysis_data.comments.length," comments"]}),(0,d.jsx)("div",{className:"youtube-video",children:(0,d.jsx)("iframe",{width:"100%",height:"315",src:"https://www.youtube.com/embed/".concat(s.analysis_data.video_id),frameBorder:"0",allowFullScreen:!0,title:s.analysis_data.title})}),(0,d.jsx)("button",{onClick:()=>(s=>{j("/YouTubeAnalysis",{state:{videoUrl:"https://youtu.be/".concat(s.analysis_data.video_id)}})})(s),className:"profile-btn",children:"Re-analyze YouTube"})]},e)))})]}),_.length>0&&(0,d.jsxs)("div",{className:"history-category reddit",children:[(0,d.jsxs)("h4",{children:[(0,d.jsx)(r.g,{icon:c.onr})," Reddit Analysis"]}),(0,d.jsx)("div",{className:"analysis-content",children:_.map(((s,e)=>(0,d.jsxs)("div",{className:"history-item",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Date:"})," ",new Date(s.timestamp).toLocaleString()]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Post URL:"})," ",(0,d.jsx)("a",{href:s.analysis_data.post.url,target:"_blank",rel:"noreferrer",className:"profile_link",children:"View Post"})]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Subreddit:"})," ",s.analysis_data.subreddit||"No Subreddit Data"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Comments:"})," ",s.analysis_data.comments.length," comments"]}),(0,d.jsx)("div",{className:"reddit-post",children:s.analysis_data.post.url&&s.analysis_data.post.url.match(/\.(jpeg|jpg|gif|png)$/)?(0,d.jsx)("img",{src:s.analysis_data.post.url,alt:"Reddit post",className:"reddit-image"}):null}),(0,d.jsx)("button",{onClick:()=>(s=>{j("/RedditAnalysis",{state:{postId:"https://reddit/comments/".concat(s.analysis_data.post_id)}})})(s),className:"profile-btn",children:"Re-analyze Reddit"})]},e)))})]})]}),0===h.length&&!y&&(0,d.jsx)("p",{className:"no-history",children:"No analysis history found."})]})]}):(0,d.jsx)("p",{children:(0,d.jsx)(o.A,{})})]})}}}]);
//# sourceMappingURL=868.bbac522f.chunk.js.map