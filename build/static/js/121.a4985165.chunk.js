"use strict";(self.webpackChunksentiment_analysis=self.webpackChunksentiment_analysis||[]).push([[121],{9121:(e,s,o)=>{o.r(s),o.d(s,{default:()=>f});var n=o(9379),a=o(2483),t=o(3376),i=o(7321),r=o(5888),l=o(8902),c=o(9747),g=o(1750),d=o(6871),u=o(1817),p=o(6723);const f=()=>{const{login:e,host:s}=(0,a.useContext)(i.c),[o,f]=(0,a.useState)({credential:"",password:""}),[m,h]=(0,a.useState)(""),[j,w]=(0,a.useState)(!1),[x,S]=(0,a.useState)(!1),y=(0,t.Zp)(),{showToast:k}=(0,g.d)(),b=(0,d.mg)({onSuccess:async o=>{try{console.log("Google Login Data:",o),console.log(s);const n=await fetch("".concat(s,"/google-login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o.access_token})}),a=await n.json(),{access_token:t,user_info:i,message:r}=a;if(console.log("JWT Token:",t),console.log("User Info:",i),n.ok)e(t),localStorage.setItem("user",JSON.stringify(i)),k("".concat(r," Redirecting to profile..."),"success"),y("/profile");else if(401===n.status){k("Google User does not exist. Signing up now...","warning");const n=await fetch("".concat(s,"/google-signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o.access_token})}),a=await n.json();n.ok?(e(a.access_token),localStorage.setItem("user",JSON.stringify(a.user_info)),k("Signup successful","success"),y("/profile")):(localStorage.removeItem("user"),k(a.detail||"Signup failed","error"))}else k(r||"Authentication failed","error")}catch(m){console.error("Google login failed:",m),k("Google login failed. Please try again.","error")}},onError:e=>{console.error("Google Login Failed:",e),k("Google login failed. Please try again.","error")}});(0,a.useEffect)((()=>{const e=localStorage.getItem("user");if(e){const{email:s,username:o,password:n}=JSON.parse(e);f(n?{credential:s||o,password:n}:{credential:s||o,password:"default_google_password"})}}),[]);const N=e=>{const{name:s,value:a}=e.target;f((0,n.A)((0,n.A)({},o),{},{[s]:a}))};return(0,p.jsxs)("div",{className:"login-container",children:[(0,p.jsx)("h2",{children:"Login"}),j?(0,p.jsx)(l.A,{}):(0,p.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),w(!0);try{const n=await fetch("".concat(s,"/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!n.ok)throw new Error("Invalid username/email or password");const a=await n.json();console.log("Access Token:",a.access_token),console.log("User Data:",a.user),e(a.access_token),localStorage.setItem("user",JSON.stringify(a.user)),k("Login successful! Redirecting to profile...","success"),y("/profile")}catch(a){console.error(a.message),h("Invalid username/email or password"),k("Login failed. Please check your credentials.","error")}finally{w(!1)}},children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{children:"Username or Email:"}),(0,p.jsx)("input",{type:"text",name:"credential",value:o.credential,onChange:N,required:!0})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{children:"Password:"}),(0,p.jsxs)("div",{className:"password-container",children:[(0,p.jsx)("input",{type:x?"text":"password",name:"password",value:o.password,onChange:N,required:!0}),(0,p.jsxs)("span",{className:"password-toggle-icon",onClick:()=>S(!x),children:[x?(0,p.jsx)(r.g,{icon:c.k6j}):(0,p.jsx)(r.g,{icon:c.pS3})," "]})]})]}),m&&(0,p.jsx)("p",{className:"error-message",children:m}),(0,p.jsx)("button",{className:"btn",type:"submit",children:"Login"})]}),(0,p.jsx)("div",{className:"google-btn-container",children:(0,p.jsxs)("button",{className:"button-google",onClick:b,children:[(0,p.jsx)("img",{src:u,alt:"Google Icon",className:"google-icon"}),"Login with Google"]})}),(0,p.jsxs)("p",{children:["Don't have an account?"," ",(0,p.jsx)("span",{className:"signup-link",onClick:()=>y("/signup"),children:"Sign Up"})]})]})}},1817:(e,s,o)=>{e.exports=o.p+"static/media/google.81fdb134397492b14f45.png"}}]);
//# sourceMappingURL=121.a4985165.chunk.js.map