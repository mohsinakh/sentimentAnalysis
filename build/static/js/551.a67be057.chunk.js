"use strict";(self.webpackChunksentiment_analysis=self.webpackChunksentiment_analysis||[]).push([[551],{551:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var n=s(2483),a=s(9200),i=s(5888),r=s(2362),l=s(9747),o=s(2266),c=s(7321),d=s(3376),h=s(8902),u=s(6723);o.t1.register(o.PP,o.kc,o.E8,o.hE,o.m_,o.s$);const m=()=>{const[e,t]=(0,n.useState)(""),[s,o]=(0,n.useState)([]),[m,j]=(0,n.useState)(null),[x,g]=(0,n.useState)(null),[p,v]=(0,n.useState)(!1),[y,f]=(0,n.useState)(!1),b=(0,d.zy)(),{token:C,logout:N,host:k}=(0,n.useContext)(c.c),S=async e=>{if(!C)return g("Please log in to continue."),void N();v(!0),g(null);try{const t=await fetch("".concat(k,"/fetch-reddit-comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C)},body:JSON.stringify({url:e})});if(401===t.status)return void g("Session expired. Please log in again.");if(404===t.status)return void g("Reddit post not found. Please check the URL.");if(!t.ok)throw new Error("Failed to fetch data");const s=await t.json();"Analysis already exists"===s.message?(j(s.analysis_data.post),o(s.analysis_data.comments||[])):(j(s.post),o(s.comments||[]))}catch(t){g("Failed to fetch data. Please check the URL and try again."),console.error(t)}finally{v(!1)}};(0,n.useEffect)((()=>{var e;const s=null===(e=b.state)||void 0===e?void 0:e.postId;s&&(t(s),S(s))}),[b.state]);const{positiveCount:w,neutralCount:P,negativeCount:A}=(()=>{let e=0,t=0,n=0;return s.length&&s.forEach((s=>{"positive"===s.sentiment?e++:"neutral"===s.sentiment?t++:"negative"===s.sentiment&&n++})),{positiveCount:e,neutralCount:t,negativeCount:n}})(),E={labels:["Positive","Neutral","Negative"],datasets:[{label:"Sentiment Distribution",data:[w,P,A],backgroundColor:["#28a745","#6c757d","#dc3545"],borderColor:["#28a745","#6c757d","#dc3545"],borderWidth:1}]};return(0,u.jsxs)("div",{className:"reddit-analysis main-content",children:[(0,u.jsxs)("h2",{children:[(0,u.jsx)(i.g,{icon:r.onr,className:"service-icon"})," Reddit Comment Analysis"]}),(0,u.jsx)("p",{children:"Analyze the sentiment of comments on Reddit posts to better understand user opinions."}),(0,u.jsxs)("div",{className:"search-bar",children:[(0,u.jsx)("input",{id:"reddit-url",type:"text",placeholder:"Enter Reddit post link",value:e,onChange:e=>t(e.target.value),onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),S(e))},onFocus:()=>document.getElementById("reddit-url").select()}),(0,u.jsx)("button",{onClick:()=>S(e),disabled:p,className:"btn",children:(0,u.jsx)(i.g,{icon:l.MjD})})]}),x&&(0,u.jsx)("p",{className:"error-message",children:x}),p&&(0,u.jsx)(h.A,{}),m&&(0,u.jsxs)("div",{className:"post-embed",children:[(0,u.jsx)("h3",{children:m.title}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Author:"})," ",m.author||"Author not available"]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Content:"})," ",m.content||"No content available"]}),(0,u.jsx)("a",{href:m.url,target:"_blank",rel:"noreferrer",className:"view-post-link",children:"View Post"}),m.url&&m.url.match(/\.(jpeg|jpg|gif|png)$/)&&(0,u.jsx)("img",{src:m.url,alt:"Reddit post",className:"reddit-image"})]}),s.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"sentiment-counts",children:[(0,u.jsx)("h3",{children:"Sentiment Breakdown"}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Positive:"})," ",w]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Neutral:"})," ",P]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Negative:"})," ",A]})]}),(0,u.jsx)("button",{className:"toggle-chart-btn",onClick:()=>f(!y),children:y?"Hide Chart":"Show Chart"}),y&&(0,u.jsx)("div",{className:"chart-container",children:(0,u.jsx)(a.yP,{data:E})})]}),s.length>0&&(0,u.jsxs)("div",{className:"comments",children:[(0,u.jsx)("h2",{children:"Comments"}),(0,u.jsx)("ul",{children:s.map(((e,t)=>(0,u.jsxs)("li",{className:"comment-card",children:[(0,u.jsxs)("h4",{children:["positive"===e.sentiment&&"\ud83d\ude0a","neutral"===e.sentiment&&"\ud83d\ude10","negative"===e.sentiment&&"\ud83d\ude20"," ".concat(e.user||"Anonymous")]}),(0,u.jsx)("div",{className:"sentiment-label ".concat(e.sentiment),children:e.sentiment}),(0,u.jsx)("p",{children:e.text})]},t)))})]})]})}}}]);
//# sourceMappingURL=551.a67be057.chunk.js.map