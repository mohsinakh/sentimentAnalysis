"use strict";(self.webpackChunksentiment_analysis=self.webpackChunksentiment_analysis||[]).push([[551],{551:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var n=s(483),a=s(7),i=s(888),r=s(362),l=s(747),o=s(266),c=s(321),d=s(376),h=s(723);o.t1.register(o.PP,o.kc,o.E8,o.hE,o.m_,o.s$);const u=()=>{const[e,t]=(0,n.useState)(""),[s,o]=(0,n.useState)([]),[u,m]=(0,n.useState)(null),[j,p]=(0,n.useState)(null),[x,g]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),f=(0,d.zy)(),{token:b,logout:C}=(0,n.useContext)(c.c),N=async e=>{if(!b)return p("Please log in to continue."),void C();g(!0),p(null);try{const t=await fetch("https://sentiment-analysis-api-eight.vercel.app/fetch-reddit-comments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)},body:JSON.stringify({url:e})});if(401===t.status)return void p("Session expired. Please log in again.");if(404===t.status)return void p("Reddit post not found. Please check the URL.");if(!t.ok)throw new Error("Failed to fetch data");const s=await t.json();"Analysis already exists"===s.message?(m(s.analysis_data.post),o(s.analysis_data.comments||[])):(m(s.post),o(s.comments||[]))}catch(t){p("Failed to fetch data. Please check the URL and try again."),console.error(t)}finally{g(!1)}};(0,n.useEffect)((()=>{var e;const s=null===(e=f.state)||void 0===e?void 0:e.postId;s&&t(s)}),[f.state]);const{positiveCount:k,neutralCount:S,negativeCount:w}=(()=>{let e=0,t=0,n=0;return s.length&&s.forEach((s=>{"positive"===s.sentiment?e++:"neutral"===s.sentiment?t++:"negative"===s.sentiment&&n++})),{positiveCount:e,neutralCount:t,negativeCount:n}})(),P={labels:["Positive","Neutral","Negative"],datasets:[{label:"Sentiment Distribution",data:[k,S,w],backgroundColor:["#28a745","#6c757d","#dc3545"],borderColor:["#28a745","#6c757d","#dc3545"],borderWidth:1}]};return(0,h.jsxs)("div",{className:"reddit-analysis main-content",children:[(0,h.jsxs)("h2",{children:[(0,h.jsx)(i.g,{icon:r.onr,className:"service-icon"})," Reddit Comment Analysis"]}),(0,h.jsx)("p",{children:"Analyze the sentiment of comments on Reddit posts to better understand user opinions."}),(0,h.jsxs)("div",{className:"search-bar",children:[(0,h.jsx)("input",{id:"reddit-url",type:"text",placeholder:"Enter Reddit post link",value:e,onChange:e=>t(e.target.value),onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),N(e))},onFocus:()=>document.getElementById("reddit-url").select()}),(0,h.jsx)("button",{onClick:()=>N(e),disabled:x,className:"btn",children:(0,h.jsx)(i.g,{icon:l.MjD})})]}),j&&(0,h.jsx)("p",{className:"error-message",children:j}),x&&(0,h.jsx)("p",{children:"Loading..."}),u&&(0,h.jsxs)("div",{className:"post-embed",children:[(0,h.jsx)("h3",{children:u.title}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Author:"})," ",u.author||"Author not available"]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Content:"})," ",u.content||"No content available"]}),(0,h.jsx)("a",{href:u.url,target:"_blank",rel:"noreferrer",className:"view-post-link",children:"View Post"}),u.url&&u.url.match(/\.(jpeg|jpg|gif|png)$/)&&(0,h.jsx)("img",{src:u.url,alt:"Reddit post",className:"reddit-image"})]}),s.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"sentiment-counts",children:[(0,h.jsx)("h3",{children:"Sentiment Breakdown"}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Positive:"})," ",k]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Neutral:"})," ",S]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Negative:"})," ",w]})]}),(0,h.jsx)("button",{className:"toggle-chart-btn",onClick:()=>y(!v),children:v?"Hide Chart":"Show Chart"}),v&&(0,h.jsx)("div",{className:"chart-container",children:(0,h.jsx)(a.yP,{data:P})})]}),s.length>0&&(0,h.jsxs)("div",{className:"comments",children:[(0,h.jsx)("h2",{children:"Comments"}),(0,h.jsx)("ul",{children:s.map(((e,t)=>(0,h.jsxs)("li",{className:"comment-card",children:[(0,h.jsxs)("h4",{children:["positive"===e.sentiment&&"\ud83d\ude0a","neutral"===e.sentiment&&"\ud83d\ude10","negative"===e.sentiment&&"\ud83d\ude20"," ".concat(e.user||"Anonymous")]}),(0,h.jsx)("div",{className:"sentiment-label ".concat(e.sentiment),children:e.sentiment}),(0,h.jsx)("p",{children:e.text})]},t)))})]})]})}}}]);
//# sourceMappingURL=551.04b87ca6.chunk.js.map