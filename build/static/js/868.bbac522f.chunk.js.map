{"version":3,"file":"static/js/868.bbac522f.chunk.js","mappings":"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","sources":["pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport './css/Profile.css';  // Importing the CSS file\nimport { faEnvelope, faSmile, faUser } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faReddit, faYoutube } from '@fortawesome/free-brands-svg-icons';\nimport Loading from './Loading';  // Import the Loading component\n\nconst Profile = () => {\n  const { token } = useContext(AuthContext);\n  const [user, setUser] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [loadingHistory, setLoadingHistory] = useState(true);  // State for tracking loading status of history\n  const navigate = useNavigate();\n\n  const fetchHistory = useCallback(async (username) => {\n    try {\n      const response = await fetch('https://sentiment-analysis-api-eight.vercel.app/analysis-history', {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) {\n        setLoadingHistory(false);\n        return}\n      ;\n\n      const data = await response.json();\n      setHistory(data.history || []);\n      setLoadingHistory(false);  // Set loadingHistory to false once data is fetched\n    } catch (error) {\n      console.error('Error fetching analysis history:', error);\n      setLoadingHistory(false);  // Ensure loading is stopped even in case of error\n    }\n  }, [token]);\n\n  useEffect(() => {\n    if (!token) {\n      navigate('/login');\n    } else {\n      const fetchedUser = JSON.parse(localStorage.getItem('user')) || null;\n      if (fetchedUser) {\n        setUser(fetchedUser);\n        fetchHistory(fetchedUser.username);\n      } else {\n        navigate('/login');\n      }\n    }\n  }, [token, navigate, fetchHistory]);\n\n  const sentimentHistory = history.filter(item => item.analysis_type === 'sentiment');\n  const youtubeHistory = history.filter(item => item.analysis_type === 'youtube');\n  const redditHistory = history.filter(item => item.analysis_type === 'reddit');\n\n  // Handle re-analysis for individual items\n  const handleReanalyzeSentiment = (item) => {\n    navigate('/RealTimeSentimentAnalysis', { state: { analysisData: item.analysis_data.text } });\n  };\n\n  const handleReanalyzeYouTube = (item) => {\n    navigate('/YouTubeAnalysis', { state: { videoUrl: `https://youtu.be/${item.analysis_data.video_id}`} });\n  };\n\n  const handleReanalyzeReddit = (item) => {\n    navigate('/RedditAnalysis', { state:  { postId:`https://reddit/comments/${item.analysis_data.post_id}` }  });\n  };\n\n  return (\n    <div className=\"profile-page\">\n      <h2 className=\"profile-header\">Profile Page</h2>\n      {user ? (\n        <div className=\"profile-details\">\n          <p><FontAwesomeIcon icon={faUser} /><strong> Username:</strong> {user.username}</p>\n          <p><FontAwesomeIcon icon={faEnvelope} /><strong> Email:</strong> {user.email}</p>\n\n          <div className=\"history-section\">\n            <h3>Analysis History</h3>\n            {loadingHistory ? (\n              <Loading />  // Show loading spinner while history is being fetched\n            ) : (\n              <div className=\"history-category-container\">\n                {sentimentHistory.length > 0 && (\n                  <div className=\"history-category sentiment\">\n                    <h4><FontAwesomeIcon icon={faSmile} /> Sentiment Analysis</h4>\n                    <div className=\"analysis-content\">\n                      {sentimentHistory.map((item, index) => (\n                        <div key={index} className=\"history-item\">\n                          <p><strong>Date:</strong> {new Date(item.timestamp).toLocaleString()}</p>\n                          <p><strong>Text:</strong> {item.analysis_data.text}</p>\n                          <p><strong>Sentiment:</strong> {item.analysis_data.sentiment}</p>\n                          <button onClick={() => handleReanalyzeSentiment(item)} className='profile-btn'>Re-analyze Sentiment</button>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {youtubeHistory.length > 0 && (\n                  <div className=\"history-category youtube\">\n                    <h4><FontAwesomeIcon icon={faYoutube} /> YouTube Analysis</h4>\n                    <div className=\"analysis-content\">\n                      {youtubeHistory.map((item, index) => (\n                        <div key={index} className=\"history-item\">\n                          <p><strong>Date:</strong> {new Date(item.timestamp).toLocaleString()}</p>\n                          <p><strong>Video URL:</strong> <a href={`https://www.youtube.com/embed/${item.analysis_data.video_id}`} target='_blank' rel='noreferrer' className='profile_link'>View Video</a></p>\n                          <p><strong>Video Title:</strong> {item.analysis_data.title}</p>\n                          <p><strong>Comments:</strong> {item.analysis_data.comments.length} comments</p>\n                          <div className=\"youtube-video\">\n                            <iframe\n                              width=\"100%\"\n                              height=\"315\"\n                              src={`https://www.youtube.com/embed/${item.analysis_data.video_id}`}\n                              frameBorder=\"0\"\n                              allowFullScreen\n                              title={item.analysis_data.title}\n                            ></iframe>\n                          </div>\n                          <button onClick={() => handleReanalyzeYouTube(item)} className='profile-btn'>Re-analyze YouTube</button>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {redditHistory.length > 0 && (\n                  <div className=\"history-category reddit\">\n                    <h4><FontAwesomeIcon icon={faReddit} /> Reddit Analysis</h4>\n                    <div className=\"analysis-content\">\n                      {redditHistory.map((item, index) => (\n                        <div key={index} className=\"history-item\">\n                          <p><strong>Date:</strong> {new Date(item.timestamp).toLocaleString()}</p>\n                          <p><strong>Post URL:</strong> <a href={item.analysis_data.post.url} target='_blank' rel='noreferrer' className='profile_link'>View Post</a></p>\n                          <p><strong>Subreddit:</strong> {item.analysis_data.subreddit || \"No Subreddit Data\"}</p>\n                          <p><strong>Comments:</strong> {item.analysis_data.comments.length} comments</p>\n                          <div className=\"reddit-post\">\n                            {item.analysis_data.post.url ? (\n                              item.analysis_data.post.url.match(/\\.(jpeg|jpg|gif|png)$/) ? (\n                                <img\n                                  src={item.analysis_data.post.url}\n                                  alt=\"Reddit post\"\n                                  className=\"reddit-image\"\n                                />\n                              ) : null\n                            ) : null}\n                          </div>\n                          <button onClick={() => handleReanalyzeReddit(item)} className='profile-btn'>Re-analyze Reddit</button>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {history.length === 0 && !loadingHistory && <p className=\"no-history\">No analysis history found.</p>}\n          </div>\n        </div>\n      ) : (\n        <p><Loading/></p>\n      )}\n    </div>\n  );\n};\n\nexport default Profile;\n"],"names":["Profile","token","useContext","AuthContext","user","setUser","useState","history","setHistory","loadingHistory","setLoadingHistory","navigate","useNavigate","fetchHistory","useCallback","async","response","fetch","method","headers","concat","ok","data","json","error","console","useEffect","fetchedUser","JSON","parse","localStorage","getItem","username","sentimentHistory","filter","item","analysis_type","youtubeHistory","redditHistory","_jsxs","className","children","_jsx","FontAwesomeIcon","icon","faUser","faEnvelope","email","Loading","length","faSmile","map","index","Date","timestamp","toLocaleString","analysis_data","text","sentiment","onClick","state","analysisData","handleReanalyzeSentiment","faYoutube","href","video_id","target","rel","title","comments","width","height","src","frameBorder","allowFullScreen","videoUrl","handleReanalyzeYouTube","faReddit","post","url","subreddit","match","alt","postId","post_id","handleReanalyzeReddit"],"sourceRoot":""}