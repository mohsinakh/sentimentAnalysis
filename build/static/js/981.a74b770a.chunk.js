"use strict";(self.webpackChunksentiment_analysis=self.webpackChunksentiment_analysis||[]).push([[981],{981:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var s=n(483),a=n(888),i=n(362),o=n(747),c=n(7),l=n(266),r=n(321),d=n(376),u=n(723);l.t1.register(l.PP,l.kc,l.E8,l.hE,l.m_,l.s$);const m=function(){const[e,t]=(0,s.useState)(""),[n,l]=(0,s.useState)(null),[m,h]=(0,s.useState)([]),[p,v]=(0,s.useState)(""),[x,g]=(0,s.useState)(0),[j,y]=(0,s.useState)(0),[b,f]=(0,s.useState)(0),[w,S]=(0,s.useState)(!1),[k,N]=(0,s.useState)(!1),{token:C,logout:E}=(0,s.useContext)(r.c),P=(0,d.Zp)(),B=(0,d.zy)(),T=(0,s.useCallback)((async e=>{N(!0),v(""),h([]),g(0),y(0),f(0);const t=(e=>{const t=e.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/);return t?t[1]:null})(e);if(l(t),!C)return v("Please log in to continue."),E(),void P("/login");try{const t=await fetch("https://sentiment-analysis-api-eight.vercel.app/fetch-comments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C)},body:JSON.stringify({url:e})});if(401===t.status)return v("Session expired. Please log in again."),E(),void P("/login");if(!t.ok)throw new Error("Failed to fetch comments");const n=await t.json();h(n.comments);let s=0,a=0,i=0;n.comments.forEach((e=>{"positive"===e.sentiment?s++:"neutral"===e.sentiment?a++:"negative"===e.sentiment&&i++})),g(s),y(a),f(i),N(!1)}catch(p){v("Error fetching comments. Please check the URL and try again."),N(!1)}}),[C,E,P]);(0,s.useEffect)((()=>{const e=B.state;null!==e&&void 0!==e&&e.videoUrl&&(t(e.videoUrl),T(e.videoUrl))}),[B.state]);const U={labels:["Positive","Neutral","Negative"],datasets:[{label:"Sentiment Breakdown",data:[x,j,b],backgroundColor:["#28a745","#6c757d","#dc3545"],borderColor:["#28a745","#6c757d","#dc3545"],borderWidth:1}]};return(0,u.jsxs)("div",{className:"youtube-comment-analysis",children:[(0,u.jsxs)("h1",{children:[(0,u.jsx)(a.g,{icon:i.B4m})," YouTube Comment Analysis"]}),(0,u.jsxs)("div",{className:"search-bar",children:[(0,u.jsx)("input",{id:"youtube-url",type:"text",placeholder:"Enter YouTube video URL",value:e,onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),T(e))},onFocus:()=>{document.getElementById("youtube-url").select()},onChange:e=>t(e.target.value)}),(0,u.jsx)("button",{onClick:()=>T(e),className:"btn",children:(0,u.jsx)(a.g,{icon:o.MjD})})]}),p&&(0,u.jsx)("p",{style:{color:"red"},children:p}),n&&(0,u.jsx)("div",{className:"video-container",children:(0,u.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(n),title:"YouTube video preview",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),k&&(0,u.jsx)("p",{children:"Loading comments..."}),m.length>0&&(0,u.jsxs)("div",{className:"sentiment-counts",children:[(0,u.jsx)("h3",{children:"Sentiment Breakdown"}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Positive:"})," ",x]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Neutral:"})," ",j]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("strong",{children:"Negative:"})," ",b]})]}),m.length>0&&(0,u.jsx)("button",{className:"analyze-button",onClick:()=>S(!w),children:w?"Hide Chart":"Show Chart"}),w&&m.length>0&&(0,u.jsx)("div",{className:"chart-container",children:(0,u.jsx)(c.yP,{data:U})}),m.length>0&&(0,u.jsxs)("div",{className:"comments",children:[(0,u.jsx)("h2",{children:"Comments"}),(0,u.jsx)("ul",{children:m.map(((e,t)=>(0,u.jsxs)("li",{className:"comment-card",children:[(0,u.jsxs)("h4",{children:["positive"===e.sentiment&&"\ud83d\ude0a","neutral"===e.sentiment&&"\ud83d\ude10","negative"===e.sentiment&&"\ud83d\ude20"," ".concat(e.username||"Anonymous")]}),(0,u.jsxs)("div",{className:"sentiment-label ".concat(e.sentiment),children:["positive"===e.sentiment&&"pos","neutral"===e.sentiment&&"neu","negative"===e.sentiment&&"neg"]}),(0,u.jsx)("p",{children:e.text})]},t)))})]})]})}}}]);
//# sourceMappingURL=981.a74b770a.chunk.js.map